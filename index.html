<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【公式】アマツの儀式 ～村一番の大罪人～</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Shippori+Mincho:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="icon" href="assets/logo.png" type="image/png">
</head>

<body>
    <div class="custom-cursor"></div>

    <header class="hero">
        <div class="hero-bg"></div>
        <div class="logo-container">
            <img src="assets/logo.png" alt="アマツの儀式 ロゴ" class="main-logo">
            <a href="https://www.youtube.com/watch?v=htUqOHyOk9w" target="_blank" class="pv-link-btn">
                <span>ティザーPV</span>
            </a>
        </div>
        <div class="scroll-down"></div>
    </header>

    <main>
        <section class="character-section">
            <h2 class="section-title">CHARACTERS</h2>
            <div class="character-grid">
                <div class="character-card">
                    <div class="char-image">
                        <img src="assets/characters/kan.png" alt="カン">
                    </div>
                    <div class="char-info">
                        <span class="char-name">カン</span>
                    </div>
                </div>
                <div class="character-card">
                    <div class="char-image">
                        <img src="assets/characters/iri.png" alt="イリ">
                    </div>
                    <div class="char-info">
                        <span class="char-name">イリ</span>
                    </div>
                </div>
                <div class="character-card">
                    <div class="char-image">
                        <img src="assets/characters/aegis.png" alt="エイジス">
                    </div>
                    <div class="char-info">
                        <span class="char-name">エイジス</span>
                    </div>
                </div>
                <div class="character-card">
                    <div class="char-image">
                        <img src="assets/characters/amari.png" alt="アマリ">
                    </div>
                    <div class="char-info">
                        <span class="char-name">アマリ</span>
                    </div>
                </div>
            </div>
            <p class="character-quote-text">〖 諸君が此度のアマツの儀式の同志となる 〗</p>
        </section>

        <section class="story-section">
            <div class="story-content">
                <h2 class="section-title">STORY</h2>
                <div class="story-text-container">
                    <p class="story-accent">ここは信仰篤き古き時代、ある地域、とある村。</p>
                    <p>この村に古くから伝わる儀式、アマツ。</p>
                    <p>アマツでは神に選ばれた子のいる4軒の軒先に神の矢が刺さるとされ、</p>
                    <p><span class="highlight-red">あなた達4人は神に選ばれた儀式の"同志"となった。</span></p>
                    <p class="story-spacer"></p>
                    <p>神に選ばれた4人の同志がすべきこと、それは生贄の選出。</p>
                    <p>生贄に相応しいとされるのは村に対する罪の大きさがより大きい者。</p>
                    <p>あなた達は1日の間、<span class="highlight-large">生贄</span>を選ぶために情報を集め、話し合う。</p>
                    <p class="story-spacer"></p>
                    <p>罪を犯したことのない者などいるのだろうか？</p>
                    <p>隠しきれる罪などどれほど存在するのだろうか？</p>
                    <p>生贄の運命を乗り越え、村の未来を救い</p>
                    <p><span class="highlight-large">英雄</span>となるのはいったい誰なのか。</p>
                    <p class="story-spacer"></p>
                    <p class="story-accent">ここは信仰篤き古き時代、ある地域、とある村。</p>
                    <p class="footer-message">神はすべてを見ている。</p>
                </div>
            </div>
        </section>
    </main>

    <section class="purchase-section">
        <div id="hashtag" class="hashtag">#アマツの儀式</div>
        <a href="https://vsp-official.booth.pm/items/5291426" target="_blank" class="purchase-btn">製品を購入する</a>
    </section>

    <section class="spec-section">
        <h2 class="section-title">SPEC</h2>
        <dl class="spec-list">
            <div class="spec-item">
                <dt>タイトル</dt>
                <dd>アマツの儀式　～村一番の大罪人～</dd>
            </div>
            <div class="spec-item">
                <dt>英文名</dt>
                <dd>Rite of Amatsu</dd>
            </div>
            <div class="spec-item">
                <dt>プラットフォーム</dt>
                <dd>ココフォリア</dd>
            </div>
            <div class="spec-item">
                <dt>発売日</dt>
                <dd>2025年4月15日</dd>
            </div>
            <div class="spec-item">
                <dt>ジャンル</dt>
                <dd>和風＋ミステリー</dd>
            </div>
            <div class="spec-item">
                <dt>プレイ人数</dt>
                <dd>PL4名＋GM</dd>
            </div>
            <div class="spec-item">
                <dt>企画・総括</dt>
                <dd>おだのぶVtuber</dd>
            </div>
        </dl>
    </section>

    <footer>
        <a href="https://x.com/vsp_official" target="_blank" class="footer-logo-link">
            <img src="assets/vsp_logo.png" alt="VSP_OFFICIAL" class="footer-logo">
        </a>
    </footer>

    <a href="https://vsp-official.booth.pm/items/5291426" target="_blank" class="floating-btn">
        <span>製品購入へ</span>
    </a>

    <div id="blackout"></div>

    <div id="charOverlay" class="char-overlay">
        <div class="close-overlay">&times;</div>
        <div class="char-side-panel">
            <div class="char-detail-text">
                <div class="char-vertical-wrap">
                    <div class="char-flex-column">
                        <span class="char-detail-ho" id="detailHO"></span>
                        <span class="char-detail-name" id="detailName"></span>
                        <p class="char-quote" id="detailQuote"></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="char-detail-img-container">
            <img src="" alt="" class="char-detail-img" id="detailImg">
        </div>
    </div>

    <script>
        // Custom Cursor Implementation
        const cursor = document.querySelector('.custom-cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        document.querySelectorAll('a, button, .character-card, iframe').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
        });

        // Fade-in Animation on Scroll
        const observerOptions = {
            threshold: 0.2
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('section').forEach(section => {
            observer.observe(section);
        });

        // Character Data
        const characters = {
            'kan': {
                name: 'カン',
                ho: 'やんちゃな少年',
                quote: '俺は生き残って\n名実ともに\n未来を手に入れる',
                side: 'left'
            },
            'iri': {
                name: 'イリ',
                ho: '美々しい少女',
                quote: 'ここまで来たら\n自分を信じるだけ、だよね',
                side: 'left'
            },
            'aegis': {
                name: 'エイジス',
                ho: '内気な少年',
                quote: '時間もあるようであんまりないし\nちゃんと狙いをつけて動かないと…',
                side: 'left'
            },
            'amari': {
                name: 'アマリ',
                ho: '実直な少女',
                quote: '私が生贄に選ばれるようなことは\nないんじゃないかしら？',
                side: 'left'
            }
        };

        const overlay = document.getElementById('charOverlay');
        const detailImg = document.getElementById('detailImg');
        const detailHO = document.getElementById('detailHO');
        const detailName = document.getElementById('detailName');
        const detailQuote = document.getElementById('detailQuote');

        document.querySelectorAll('.character-card').forEach(card => {
            card.addEventListener('click', () => {
                const charId = card.querySelector('img').src.split('/').pop().split('.')[0];
                const data = characters[charId];

                // Disable transition to reset position instantly
                detailImg.style.transition = 'none';
                detailImg.classList.remove('slide-left', 'slide-right');

                // Clear previous char classes and reset overlay state
                overlay.className = 'char-overlay';
                overlay.classList.add('char-' + charId);

                // Force layout reflow
                void detailImg.offsetWidth;

                // Set new data
                detailImg.src = `assets/characters/${charId}.png`;
                if (detailHO) detailHO.textContent = data.ho;
                if (detailName) detailName.textContent = data.name;

                // Hide quote initially, then show with delay
                detailQuote.style.transition = 'none';
                detailQuote.style.opacity = '0';
                detailQuote.textContent = data.quote;
                void detailQuote.offsetWidth; // Force reflow
                detailQuote.style.transition = 'opacity 0.5s ease';
                setTimeout(() => {
                    detailQuote.style.opacity = '1';
                }, 500);

                if (data.side === 'left') {
                    detailImg.classList.add('slide-left');
                } else {
                    detailImg.classList.add('slide-right');
                }

                // Re-enable transition and trigger animation in the next frame
                requestAnimationFrame(() => {
                    detailImg.style.transition = '';
                    overlay.classList.add('active');
                });
            });
        });

        document.querySelector('.close-overlay').addEventListener('click', () => {
            overlay.classList.remove('active');
        });

        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
                overlay.classList.remove('active');
            }
        });

        // Intersection Observer for Story Final Impact
        const storyObserverOptions = {
            threshold: 0.8
        };

        const storyObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !entry.target.classList.contains('triggered')) {
                    entry.target.classList.add('triggered'); // Prevent re-triggering
                    // Delay appearance by 0.2s as requested
                    setTimeout(() => {
                        entry.target.classList.add('animate');
                    }, 200);
                }
            });
        }, storyObserverOptions);

        const footerMsg = document.querySelector('.footer-message');
        if (footerMsg) storyObserver.observe(footerMsg);


    </script>
</body>

</html>